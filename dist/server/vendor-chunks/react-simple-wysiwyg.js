"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/react-simple-wysiwyg";
exports.ids = ["vendor-chunks/react-simple-wysiwyg"];
exports.modules = {

/***/ "(ssr)/./node_modules/react-simple-wysiwyg/lib/index.es.mjs":
/*!************************************************************!*\
  !*** ./node_modules/react-simple-wysiwyg/lib/index.es.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BtnBold: () => (/* binding */ BtnBold),\n/* harmony export */   BtnBulletList: () => (/* binding */ BtnBulletList),\n/* harmony export */   BtnClearFormatting: () => (/* binding */ BtnClearFormatting),\n/* harmony export */   BtnItalic: () => (/* binding */ BtnItalic),\n/* harmony export */   BtnLink: () => (/* binding */ BtnLink),\n/* harmony export */   BtnNumberedList: () => (/* binding */ BtnNumberedList),\n/* harmony export */   BtnRedo: () => (/* binding */ BtnRedo),\n/* harmony export */   BtnStrikeThrough: () => (/* binding */ BtnStrikeThrough),\n/* harmony export */   BtnStyles: () => (/* binding */ BtnStyles),\n/* harmony export */   BtnUnderline: () => (/* binding */ BtnUnderline),\n/* harmony export */   BtnUndo: () => (/* binding */ BtnUndo),\n/* harmony export */   ContentEditable: () => (/* binding */ ContentEditable),\n/* harmony export */   DefaultEditor: () => (/* binding */ DefaultEditor),\n/* harmony export */   Dropdown: () => (/* binding */ Dropdown),\n/* harmony export */   Editor: () => (/* binding */ Editor),\n/* harmony export */   EditorContext: () => (/* binding */ EditorContext),\n/* harmony export */   EditorProvider: () => (/* binding */ EditorProvider),\n/* harmony export */   HtmlButton: () => (/* binding */ HtmlButton),\n/* harmony export */   HtmlEditor: () => (/* binding */ HtmlEditor),\n/* harmony export */   Separator: () => (/* binding */ Separator),\n/* harmony export */   Toolbar: () => (/* binding */ Toolbar),\n/* harmony export */   createButton: () => (/* binding */ createButton),\n/* harmony export */   createDropdown: () => (/* binding */ createDropdown),\n/* harmony export */   \"default\": () => (/* binding */ DefaultEditor),\n/* harmony export */   useEditorState: () => (/* binding */ useEditorState)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nfunction getSelectedNode() {\n    if (document.selection) {\n        return document.selection.createRange().parentElement();\n    }\n    var selection = window.getSelection();\n    if (selection && selection.rangeCount > 0) {\n        return selection.getRangeAt(0).startContainer.parentNode || undefined;\n    }\n    return undefined;\n}\nfunction normalizeHtml(str) {\n    return str ? str.replace(/&nbsp;|\\u202F|\\u00A0/g, ' ') : '';\n}\nfunction replaceCaret(el) {\n    // Place the caret at the end of the element\n    var target = document.createTextNode('');\n    el.appendChild(target);\n    // do not move caret if element was not focused\n    var isTargetFocused = document.activeElement === el;\n    if (target !== null && target.nodeValue !== null && isTargetFocused) {\n        var sel = window.getSelection();\n        if (sel !== null) {\n            var range = document.createRange();\n            range.setStart(target, target.nodeValue.length);\n            range.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(range);\n        }\n        if (el instanceof HTMLElement)\n            el.focus();\n    }\n}\n\n/**\n * Based on https://github.com/lovasoa/react-contenteditable\n * A simple component for a html element with editable contents.\n */\nvar ContentEditable = react__WEBPACK_IMPORTED_MODULE_0__.memo(react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(function ContentEditable(_a, ref) {\n    var className = _a.className, disabled = _a.disabled, tagName = _a.tagName, _b = _a.value, value = _b === void 0 ? '' : _b, rest = __rest(_a, [\"className\", \"disabled\", \"tagName\", \"value\"]);\n    var elRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef();\n    var htmlRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(value);\n    var restRef = react__WEBPACK_IMPORTED_MODULE_0__.useRef(rest);\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function () {\n        restRef.current = rest;\n        var el = elRef.current;\n        if (el && normalizeHtml(htmlRef.current) !== normalizeHtml(value)) {\n            htmlRef.current = value;\n            el.innerHTML = value;\n            replaceCaret(el);\n        }\n    });\n    return react__WEBPACK_IMPORTED_MODULE_0__.useMemo(function () {\n        function onSetRef($el) {\n            elRef.current = $el;\n            if (typeof ref === 'function') {\n                ref($el);\n            }\n            else if (typeof ref === 'object' && ref) {\n                // eslint-disable-next-line no-param-reassign\n                ref.current = $el;\n            }\n        }\n        function onChange(event) {\n            var _a, _b;\n            var el = elRef.current;\n            if (!el) {\n                return;\n            }\n            var elementHtml = el.innerHTML;\n            if (elementHtml !== htmlRef.current) {\n                (_b = (_a = restRef.current).onChange) === null || _b === void 0 ? void 0 : _b.call(_a, __assign(__assign({}, event), { target: {\n                        value: elementHtml,\n                        name: rest.name,\n                    } }));\n            }\n            htmlRef.current = elementHtml;\n        }\n        return react__WEBPACK_IMPORTED_MODULE_0__.createElement(tagName || 'div', __assign(__assign({}, rest), { className: className, contentEditable: !disabled, dangerouslySetInnerHTML: { __html: value }, onBlur: function (e) {\n                return (restRef.current.onBlur || onChange)(e);\n            }, onInput: onChange, onKeyDown: function (e) {\n                return (restRef.current.onKeyDown || onChange)(e);\n            }, onKeyUp: function (e) {\n                return (restRef.current.onKeyUp || onChange)(e);\n            }, ref: onSetRef }));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [className, disabled, tagName]);\n}));\n\nvar EditorContext = react__WEBPACK_IMPORTED_MODULE_0__.createContext(undefined);\nfunction EditorProvider(_a) {\n    var children = _a.children;\n    var _b = react__WEBPACK_IMPORTED_MODULE_0__.useState({\n        htmlMode: false,\n        update: update,\n    }), state = _b[0], setState = _b[1];\n    function update(attrs) {\n        setState(function (prevState) {\n            return __assign(__assign(__assign({}, prevState), attrs), { date: Date.now() });\n        });\n    }\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(EditorContext.Provider, { value: state }, children));\n}\nfunction useEditorState() {\n    var context = react__WEBPACK_IMPORTED_MODULE_0__.useContext(EditorContext);\n    if (!context) {\n        throw new Error('You should wrap your component by EditorProvider');\n    }\n    return context;\n}\n\nfunction HtmlEditor(_a) {\n    var rest = __rest(_a, []);\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"textarea\", __assign({}, rest));\n}\n\nvar e=[],t=[];function n(n,r){if(n&&\"undefined\"!=typeof document){var a,s=!0===r.prepend?\"prepend\":\"append\",d=!0===r.singleTag,i=\"string\"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName(\"head\")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c();}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n));}function c(){var e=document.createElement(\"style\");if(e.setAttribute(\"type\",\"text/css\"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a=\"prepend\"===s?\"afterbegin\":\"beforeend\";return i.insertAdjacentElement(a,e),e}}\n\nvar css = \".rsw-editor{border:1px solid #ddd;border-radius:.375rem;display:flex;flex-direction:column;min-height:100px;overflow:hidden}.rsw-ce{flex:1 0 auto;padding:.5rem}.rsw-ce:focus{outline:1px solid #668}.rsw-ce[contentEditable=true]:empty:not(:focus):before{color:grey;content:attr(placeholder)}.rsw-html{background:transparent;border:none;font-family:monospace,Courier New}.rsw-separator{align-self:stretch;border-right:1px solid #ddd;display:flex;margin:0 3px}.rsw-dd{box-sizing:border-box;outline:none}.rsw-btn{background:transparent;border:0;color:#222;cursor:pointer;font-size:1em;height:2em;outline:none;padding:0;width:2em}.rsw-btn:hover{background:#eaeaea}.rsw-btn[data-active=true]{background:#e0e0e0}.rsw-toolbar{align-items:center;background-color:#f5f5f5;border-bottom:1px solid #ddd;display:flex}\";\nn(css,{});\n\nfunction Editor(_a) {\n    var children = _a.children, containerProps = _a.containerProps, onSelect = _a.onSelect, rest = __rest(_a, [\"children\", \"containerProps\", \"onSelect\"]);\n    var editorState = useEditorState();\n    react__WEBPACK_IMPORTED_MODULE_0__.useEffect(function () {\n        document.addEventListener('click', onClickOutside);\n        return function () { return document.removeEventListener('click', onClickOutside); };\n    });\n    function onClickOutside(event) {\n        var _a;\n        if (event.target === editorState.$el) {\n            return;\n        }\n        if ((_a = editorState.$el) === null || _a === void 0 ? void 0 : _a.contains(event.target)) {\n            return;\n        }\n        editorState.update({ $selection: undefined });\n    }\n    function onTextSelect(event) {\n        onSelect === null || onSelect === void 0 ? void 0 : onSelect(event);\n        editorState.update({ $selection: getSelectedNode() });\n    }\n    function setContentEditableRef($el) {\n        editorState.update({ $el: $el });\n    }\n    if (editorState.htmlMode) {\n        return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __assign({ className: \"rsw-editor\" }, containerProps),\n            children,\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(HtmlEditor, __assign({}, rest, { className: \"rsw-ce rsw-html\" }))));\n    }\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __assign({ className: \"rsw-editor\" }, containerProps),\n        children,\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(ContentEditable, __assign({}, rest, { ref: setContentEditableRef, onSelect: onTextSelect, className: \"rsw-ce\" }))));\n}\n\nfunction OrderedListIcon() {\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", style: { verticalAlign: 'text-top' } },\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { fill: \"currentColor\", d: \"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z\" })));\n}\n\nfunction UnorderedListIcon() {\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"20\", height: \"20\", viewBox: \"0 0 24 24\", style: { verticalAlign: 'text-top' } },\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"path\", { fill: \"currentColor\", d: \"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z\" })));\n}\n\nvar BtnBold = createButton('Bold', '𝐁', 'bold');\nvar BtnBulletList = createButton('Bullet list', react__WEBPACK_IMPORTED_MODULE_0__.createElement(UnorderedListIcon, null), 'insertUnorderedList');\nvar BtnClearFormatting = createButton('Clear formatting', 'T̲ₓ', 'removeFormat');\nvar BtnItalic = createButton('Italic', '𝑰', 'italic');\nvar BtnStrikeThrough = createButton('Strike through', react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"s\", null, \"ab\"), 'strikeThrough');\nvar BtnLink = createButton('Link', '🔗', function (_a) {\n    var $selection = _a.$selection;\n    if (($selection === null || $selection === void 0 ? void 0 : $selection.nodeName) === 'A') {\n        document.execCommand('unlink');\n    }\n    else {\n        // eslint-disable-next-line no-alert\n        document.execCommand('createLink', false, prompt('URL', '') || undefined);\n    }\n});\nvar BtnNumberedList = createButton('Numbered list', react__WEBPACK_IMPORTED_MODULE_0__.createElement(OrderedListIcon, null), 'insertOrderedList');\nvar BtnRedo = createButton('Redo', '↷', 'redo');\nvar BtnUnderline = createButton('Underline', react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"span\", { style: { textDecoration: 'underline' } }, \"\\uD835\\uDC14\"), 'underline');\nvar BtnUndo = createButton('Undo', '↶', 'undo');\nfunction createButton(title, content, command) {\n    ButtonFactory.displayName = title.replace(/\\s/g, '');\n    return ButtonFactory;\n    function ButtonFactory(props) {\n        var editorState = useEditorState();\n        var $el = editorState.$el, $selection = editorState.$selection;\n        var active = false;\n        if (typeof command === 'string') {\n            active = !!$selection && document.queryCommandState(command);\n        }\n        function onAction(e) {\n            e.preventDefault();\n            if (document.activeElement !== $el) {\n                $el === null || $el === void 0 ? void 0 : $el.focus();\n            }\n            if (typeof command === 'function') {\n                command(editorState);\n            }\n            else {\n                document.execCommand(command);\n            }\n        }\n        if (editorState.htmlMode) {\n            return null;\n        }\n        return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __assign({ className: \"rsw-btn\", \"data-active\": active, onMouseDown: onAction, tabIndex: -1, title: title, type: \"button\" }, props), content));\n    }\n}\n\nvar BtnStyles = createDropdown('Styles', [\n    ['Normal', 'formatBlock', 'DIV'],\n    ['𝗛𝗲𝗮𝗱𝗲𝗿 𝟭', 'formatBlock', 'H1'],\n    ['Header 2', 'formatBlock', 'H2'],\n    ['𝙲𝚘𝚍𝚎', 'formatBlock', 'PRE'],\n]);\nfunction createDropdown(title, items) {\n    DropdownFactory.displayName = title;\n    return DropdownFactory;\n    function DropdownFactory(props) {\n        var editorState = useEditorState();\n        var $el = editorState.$el, $selection = editorState.$selection, htmlMode = editorState.htmlMode;\n        if (htmlMode) {\n            return null;\n        }\n        var activeIndex = items.findIndex(function (item) { return item[1] === 'formatBlock' && ($selection === null || $selection === void 0 ? void 0 : $selection.nodeName) === item[2]; });\n        return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(Dropdown, __assign({}, props, { items: items, onChange: onChange, selected: activeIndex, tabIndex: -1, title: title })));\n        function onChange(e) {\n            var target = e.target;\n            var selectedValue = target.value;\n            var selectedIndex = parseInt(selectedValue, 10);\n            var _a = items[selectedIndex] || [], command = _a[1], commandArgument = _a[2];\n            e.preventDefault();\n            if (document.activeElement !== $el) {\n                $el === null || $el === void 0 ? void 0 : $el.focus();\n            }\n            if (typeof command === 'function') {\n                command(editorState);\n            }\n            else if (command) {\n                document.execCommand(command, false, commandArgument);\n            }\n            setTimeout(function () { return (target.value = selectedValue); }, 10);\n        }\n    }\n}\nfunction Dropdown(_a) {\n    var items = _a.items, selected = _a.selected, inputProps = __rest(_a, [\"items\", \"selected\"]);\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"select\", __assign({}, inputProps, { value: selected, className: \"rsw-dd\" }),\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"option\", { hidden: true }, inputProps.title),\n        items.map(function (item, index) { return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"option\", { key: item[2], value: index }, item[0])); })));\n}\n\nfunction HtmlButton(_a) {\n    var rest = __rest(_a, []);\n    var editorState = useEditorState();\n    function onClick() {\n        editorState.update({\n            htmlMode: !editorState.htmlMode,\n        });\n    }\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"button\", __assign({ className: \"rsw-btn\", \"data-active\": editorState.htmlMode, onClick: onClick, tabIndex: -1, title: \"HTML mode\", type: \"button\" }, rest), \"</>\"));\n}\n\nfunction Separator() {\n    var editorState = useEditorState();\n    if (editorState.htmlMode) {\n        return null;\n    }\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", { className: \"rsw-separator\" });\n}\n\nfunction Toolbar(props) {\n    return react__WEBPACK_IMPORTED_MODULE_0__.createElement(\"div\", __assign({}, props, { className: \"rsw-toolbar\" }));\n}\n\nfunction DefaultEditor(props) {\n    return (react__WEBPACK_IMPORTED_MODULE_0__.createElement(EditorProvider, null,\n        react__WEBPACK_IMPORTED_MODULE_0__.createElement(Editor, __assign({}, props),\n            react__WEBPACK_IMPORTED_MODULE_0__.createElement(Toolbar, null,\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnUndo, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnRedo, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(Separator, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnBold, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnItalic, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnUnderline, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnStrikeThrough, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(Separator, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnNumberedList, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnBulletList, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(Separator, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnLink, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnClearFormatting, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(HtmlButton, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(Separator, null),\n                react__WEBPACK_IMPORTED_MODULE_0__.createElement(BtnStyles, null)))));\n}\n\n\n//# sourceMappingURL=index.es.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcmVhY3Qtc2ltcGxlLXd5c2l3eWcvbGliL2luZGV4LmVzLm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxjQUFjO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix1Q0FBVSxDQUFDLDZDQUFnQjtBQUNqRDtBQUNBLGdCQUFnQix5Q0FBWTtBQUM1QixrQkFBa0IseUNBQVk7QUFDOUIsa0JBQWtCLHlDQUFZO0FBQzlCLElBQUksNENBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsV0FBVywwQ0FBYTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0SEFBNEgsWUFBWTtBQUN4STtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQW1C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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx3Q0FBd0M7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZ0RBQW1CLHNCQUFzQixnQkFBZ0Isc0NBQXNDO0FBQzNHLFFBQVEsZ0RBQW1CLGFBQWEsY0FBYztBQUN0RCwyQ0FBMkMsUUFBUSxnREFBbUIsYUFBYSw0QkFBNEIsY0FBYztBQUM3SDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxZQUFZLGdEQUFtQixzQkFBc0IsK0hBQStIO0FBQ3BMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdEQUFtQixVQUFVLDRCQUE0QjtBQUNwRTs7QUFFQTtBQUNBLFdBQVcsZ0RBQW1CLG1CQUFtQixXQUFXLDBCQUEwQjtBQUN0Rjs7QUFFQTtBQUNBLFlBQVksZ0RBQW1CO0FBQy9CLFFBQVEsZ0RBQW1CLG9CQUFvQjtBQUMvQyxZQUFZLGdEQUFtQjtBQUMvQixnQkFBZ0IsZ0RBQW1CO0FBQ25DLGdCQUFnQixnREFBbUI7QUFDbkMsZ0JBQWdCLGdEQUFtQjtBQUNuQyxnQkFBZ0IsZ0RBQW1CO0FBQ25DLGdCQUFnQixnREFBbUI7QUFDbkMsZ0JBQWdCLGdEQUFtQjtBQUNuQyxnQkFBZ0IsZ0RBQW1CO0FBQ25DLGdCQUFnQixnREFBbUI7QUFDbkMsZ0JBQWdCLGdEQUFtQjtBQUNuQyxnQkFBZ0IsZ0RBQW1CO0FBQ25DLGdCQUFnQixnREFBbUI7QUFDbkMsZ0JBQWdCLGdEQUFtQjtBQUNuQyxnQkFBZ0IsZ0RBQW1CO0FBQ25DLGdCQUFnQixnREFBbUI7QUFDbkMsZ0JBQWdCLGdEQUFtQjtBQUNuQyxnQkFBZ0IsZ0RBQW1CO0FBQ25DOztBQUU2VjtBQUM3ViIsInNvdXJjZXMiOlsid2VicGFjazovL3BvcnRmb2xpby8uL25vZGVfbW9kdWxlcy9yZWFjdC1zaW1wbGUtd3lzaXd5Zy9saWIvaW5kZXguZXMubWpzPzIzOTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCAqL1xyXG5cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbnR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xuXG5mdW5jdGlvbiBnZXRTZWxlY3RlZE5vZGUoKSB7XG4gICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkucGFyZW50RWxlbWVudCgpO1xuICAgIH1cbiAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuICAgIGlmIChzZWxlY3Rpb24gJiYgc2VsZWN0aW9uLnJhbmdlQ291bnQgPiAwKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKS5zdGFydENvbnRhaW5lci5wYXJlbnROb2RlIHx8IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUh0bWwoc3RyKSB7XG4gICAgcmV0dXJuIHN0ciA/IHN0ci5yZXBsYWNlKC8mbmJzcDt8XFx1MjAyRnxcXHUwMEEwL2csICcgJykgOiAnJztcbn1cbmZ1bmN0aW9uIHJlcGxhY2VDYXJldChlbCkge1xuICAgIC8vIFBsYWNlIHRoZSBjYXJldCBhdCB0aGUgZW5kIG9mIHRoZSBlbGVtZW50XG4gICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgICBlbC5hcHBlbmRDaGlsZCh0YXJnZXQpO1xuICAgIC8vIGRvIG5vdCBtb3ZlIGNhcmV0IGlmIGVsZW1lbnQgd2FzIG5vdCBmb2N1c2VkXG4gICAgdmFyIGlzVGFyZ2V0Rm9jdXNlZCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGVsO1xuICAgIGlmICh0YXJnZXQgIT09IG51bGwgJiYgdGFyZ2V0Lm5vZGVWYWx1ZSAhPT0gbnVsbCAmJiBpc1RhcmdldEZvY3VzZWQpIHtcbiAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKHNlbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KHRhcmdldCwgdGFyZ2V0Lm5vZGVWYWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XG4gICAgICAgICAgICBzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG4gICAgICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KVxuICAgICAgICAgICAgZWwuZm9jdXMoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL2xvdmFzb2EvcmVhY3QtY29udGVudGVkaXRhYmxlXG4gKiBBIHNpbXBsZSBjb21wb25lbnQgZm9yIGEgaHRtbCBlbGVtZW50IHdpdGggZWRpdGFibGUgY29udGVudHMuXG4gKi9cbnZhciBDb250ZW50RWRpdGFibGUgPSBSZWFjdC5tZW1vKFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gQ29udGVudEVkaXRhYmxlKF9hLCByZWYpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lLCBkaXNhYmxlZCA9IF9hLmRpc2FibGVkLCB0YWdOYW1lID0gX2EudGFnTmFtZSwgX2IgPSBfYS52YWx1ZSwgdmFsdWUgPSBfYiA9PT0gdm9pZCAwID8gJycgOiBfYiwgcmVzdCA9IF9fcmVzdChfYSwgW1wiY2xhc3NOYW1lXCIsIFwiZGlzYWJsZWRcIiwgXCJ0YWdOYW1lXCIsIFwidmFsdWVcIl0pO1xuICAgIHZhciBlbFJlZiA9IFJlYWN0LnVzZVJlZigpO1xuICAgIHZhciBodG1sUmVmID0gUmVhY3QudXNlUmVmKHZhbHVlKTtcbiAgICB2YXIgcmVzdFJlZiA9IFJlYWN0LnVzZVJlZihyZXN0KTtcbiAgICBSZWFjdC51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXN0UmVmLmN1cnJlbnQgPSByZXN0O1xuICAgICAgICB2YXIgZWwgPSBlbFJlZi5jdXJyZW50O1xuICAgICAgICBpZiAoZWwgJiYgbm9ybWFsaXplSHRtbChodG1sUmVmLmN1cnJlbnQpICE9PSBub3JtYWxpemVIdG1sKHZhbHVlKSkge1xuICAgICAgICAgICAgaHRtbFJlZi5jdXJyZW50ID0gdmFsdWU7XG4gICAgICAgICAgICBlbC5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgICAgIHJlcGxhY2VDYXJldChlbCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gUmVhY3QudXNlTWVtbyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIG9uU2V0UmVmKCRlbCkge1xuICAgICAgICAgICAgZWxSZWYuY3VycmVudCA9ICRlbDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmVmKCRlbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcmVmID09PSAnb2JqZWN0JyAmJiByZWYpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICByZWYuY3VycmVudCA9ICRlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBvbkNoYW5nZShldmVudCkge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIHZhciBlbCA9IGVsUmVmLmN1cnJlbnQ7XG4gICAgICAgICAgICBpZiAoIWVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGVsZW1lbnRIdG1sID0gZWwuaW5uZXJIVE1MO1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRIdG1sICE9PSBodG1sUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAoX2IgPSAoX2EgPSByZXN0UmVmLmN1cnJlbnQpLm9uQ2hhbmdlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgX19hc3NpZ24oX19hc3NpZ24oe30sIGV2ZW50KSwgeyB0YXJnZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlbGVtZW50SHRtbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHJlc3QubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBodG1sUmVmLmN1cnJlbnQgPSBlbGVtZW50SHRtbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudCh0YWdOYW1lIHx8ICdkaXYnLCBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgcmVzdCksIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUsIGNvbnRlbnRFZGl0YWJsZTogIWRpc2FibGVkLCBkYW5nZXJvdXNseVNldElubmVySFRNTDogeyBfX2h0bWw6IHZhbHVlIH0sIG9uQmx1cjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3RSZWYuY3VycmVudC5vbkJsdXIgfHwgb25DaGFuZ2UpKGUpO1xuICAgICAgICAgICAgfSwgb25JbnB1dDogb25DaGFuZ2UsIG9uS2V5RG93bjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3RSZWYuY3VycmVudC5vbktleURvd24gfHwgb25DaGFuZ2UpKGUpO1xuICAgICAgICAgICAgfSwgb25LZXlVcDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHJlc3RSZWYuY3VycmVudC5vbktleVVwIHx8IG9uQ2hhbmdlKShlKTtcbiAgICAgICAgICAgIH0sIHJlZjogb25TZXRSZWYgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW2NsYXNzTmFtZSwgZGlzYWJsZWQsIHRhZ05hbWVdKTtcbn0pKTtcblxudmFyIEVkaXRvckNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KHVuZGVmaW5lZCk7XG5mdW5jdGlvbiBFZGl0b3JQcm92aWRlcihfYSkge1xuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuO1xuICAgIHZhciBfYiA9IFJlYWN0LnVzZVN0YXRlKHtcbiAgICAgICAgaHRtbE1vZGU6IGZhbHNlLFxuICAgICAgICB1cGRhdGU6IHVwZGF0ZSxcbiAgICB9KSwgc3RhdGUgPSBfYlswXSwgc2V0U3RhdGUgPSBfYlsxXTtcbiAgICBmdW5jdGlvbiB1cGRhdGUoYXR0cnMpIHtcbiAgICAgICAgc2V0U3RhdGUoZnVuY3Rpb24gKHByZXZTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKF9fYXNzaWduKHt9LCBwcmV2U3RhdGUpLCBhdHRycyksIHsgZGF0ZTogRGF0ZS5ub3coKSB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChFZGl0b3JDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiBzdGF0ZSB9LCBjaGlsZHJlbikpO1xufVxuZnVuY3Rpb24gdXNlRWRpdG9yU3RhdGUoKSB7XG4gICAgdmFyIGNvbnRleHQgPSBSZWFjdC51c2VDb250ZXh0KEVkaXRvckNvbnRleHQpO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBzaG91bGQgd3JhcCB5b3VyIGNvbXBvbmVudCBieSBFZGl0b3JQcm92aWRlcicpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dDtcbn1cblxuZnVuY3Rpb24gSHRtbEVkaXRvcihfYSkge1xuICAgIHZhciByZXN0ID0gX19yZXN0KF9hLCBbXSk7XG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLCBfX2Fzc2lnbih7fSwgcmVzdCkpO1xufVxuXG52YXIgZT1bXSx0PVtdO2Z1bmN0aW9uIG4obixyKXtpZihuJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQpe3ZhciBhLHM9ITA9PT1yLnByZXBlbmQ/XCJwcmVwZW5kXCI6XCJhcHBlbmRcIixkPSEwPT09ci5zaW5nbGVUYWcsaT1cInN0cmluZ1wiPT10eXBlb2Ygci5jb250YWluZXI/ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihyLmNvbnRhaW5lcik6ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdO2lmKGQpe3ZhciB1PWUuaW5kZXhPZihpKTstMT09PXUmJih1PWUucHVzaChpKS0xLHRbdV09e30pLGE9dFt1XSYmdFt1XVtzXT90W3VdW3NdOnRbdV1bc109YygpO31lbHNlIGE9YygpOzY1Mjc5PT09bi5jaGFyQ29kZUF0KDApJiYobj1uLnN1YnN0cmluZygxKSksYS5zdHlsZVNoZWV0P2Euc3R5bGVTaGVldC5jc3NUZXh0Kz1uOmEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobikpO31mdW5jdGlvbiBjKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO2lmKGUuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwidGV4dC9jc3NcIiksci5hdHRyaWJ1dGVzKWZvcih2YXIgdD1PYmplY3Qua2V5cyhyLmF0dHJpYnV0ZXMpLG49MDtuPHQubGVuZ3RoO24rKyllLnNldEF0dHJpYnV0ZSh0W25dLHIuYXR0cmlidXRlc1t0W25dXSk7dmFyIGE9XCJwcmVwZW5kXCI9PT1zP1wiYWZ0ZXJiZWdpblwiOlwiYmVmb3JlZW5kXCI7cmV0dXJuIGkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KGEsZSksZX19XG5cbnZhciBjc3MgPSBcIi5yc3ctZWRpdG9ye2JvcmRlcjoxcHggc29saWQgI2RkZDtib3JkZXItcmFkaXVzOi4zNzVyZW07ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjttaW4taGVpZ2h0OjEwMHB4O292ZXJmbG93OmhpZGRlbn0ucnN3LWNle2ZsZXg6MSAwIGF1dG87cGFkZGluZzouNXJlbX0ucnN3LWNlOmZvY3Vze291dGxpbmU6MXB4IHNvbGlkICM2Njh9LnJzdy1jZVtjb250ZW50RWRpdGFibGU9dHJ1ZV06ZW1wdHk6bm90KDpmb2N1cyk6YmVmb3Jle2NvbG9yOmdyZXk7Y29udGVudDphdHRyKHBsYWNlaG9sZGVyKX0ucnN3LWh0bWx7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtib3JkZXI6bm9uZTtmb250LWZhbWlseTptb25vc3BhY2UsQ291cmllciBOZXd9LnJzdy1zZXBhcmF0b3J7YWxpZ24tc2VsZjpzdHJldGNoO2JvcmRlci1yaWdodDoxcHggc29saWQgI2RkZDtkaXNwbGF5OmZsZXg7bWFyZ2luOjAgM3B4fS5yc3ctZGR7Ym94LXNpemluZzpib3JkZXItYm94O291dGxpbmU6bm9uZX0ucnN3LWJ0bntiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjowO2NvbG9yOiMyMjI7Y3Vyc29yOnBvaW50ZXI7Zm9udC1zaXplOjFlbTtoZWlnaHQ6MmVtO291dGxpbmU6bm9uZTtwYWRkaW5nOjA7d2lkdGg6MmVtfS5yc3ctYnRuOmhvdmVye2JhY2tncm91bmQ6I2VhZWFlYX0ucnN3LWJ0bltkYXRhLWFjdGl2ZT10cnVlXXtiYWNrZ3JvdW5kOiNlMGUwZTB9LnJzdy10b29sYmFye2FsaWduLWl0ZW1zOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2RkZDtkaXNwbGF5OmZsZXh9XCI7XG5uKGNzcyx7fSk7XG5cbmZ1bmN0aW9uIEVkaXRvcihfYSkge1xuICAgIHZhciBjaGlsZHJlbiA9IF9hLmNoaWxkcmVuLCBjb250YWluZXJQcm9wcyA9IF9hLmNvbnRhaW5lclByb3BzLCBvblNlbGVjdCA9IF9hLm9uU2VsZWN0LCByZXN0ID0gX19yZXN0KF9hLCBbXCJjaGlsZHJlblwiLCBcImNvbnRhaW5lclByb3BzXCIsIFwib25TZWxlY3RcIl0pO1xuICAgIHZhciBlZGl0b3JTdGF0ZSA9IHVzZUVkaXRvclN0YXRlKCk7XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrT3V0c2lkZSk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tPdXRzaWRlKTsgfTtcbiAgICB9KTtcbiAgICBmdW5jdGlvbiBvbkNsaWNrT3V0c2lkZShldmVudCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGVkaXRvclN0YXRlLiRlbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoX2EgPSBlZGl0b3JTdGF0ZS4kZWwpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWRpdG9yU3RhdGUudXBkYXRlKHsgJHNlbGVjdGlvbjogdW5kZWZpbmVkIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvblRleHRTZWxlY3QoZXZlbnQpIHtcbiAgICAgICAgb25TZWxlY3QgPT09IG51bGwgfHwgb25TZWxlY3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9uU2VsZWN0KGV2ZW50KTtcbiAgICAgICAgZWRpdG9yU3RhdGUudXBkYXRlKHsgJHNlbGVjdGlvbjogZ2V0U2VsZWN0ZWROb2RlKCkgfSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldENvbnRlbnRFZGl0YWJsZVJlZigkZWwpIHtcbiAgICAgICAgZWRpdG9yU3RhdGUudXBkYXRlKHsgJGVsOiAkZWwgfSk7XG4gICAgfVxuICAgIGlmIChlZGl0b3JTdGF0ZS5odG1sTW9kZSkge1xuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwicnN3LWVkaXRvclwiIH0sIGNvbnRhaW5lclByb3BzKSxcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChIdG1sRWRpdG9yLCBfX2Fzc2lnbih7fSwgcmVzdCwgeyBjbGFzc05hbWU6IFwicnN3LWNlIHJzdy1odG1sXCIgfSkpKSk7XG4gICAgfVxuICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogXCJyc3ctZWRpdG9yXCIgfSwgY29udGFpbmVyUHJvcHMpLFxuICAgICAgICBjaGlsZHJlbixcbiAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChDb250ZW50RWRpdGFibGUsIF9fYXNzaWduKHt9LCByZXN0LCB7IHJlZjogc2V0Q29udGVudEVkaXRhYmxlUmVmLCBvblNlbGVjdDogb25UZXh0U2VsZWN0LCBjbGFzc05hbWU6IFwicnN3LWNlXCIgfSkpKSk7XG59XG5cbmZ1bmN0aW9uIE9yZGVyZWRMaXN0SWNvbigpIHtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgeyB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCB3aWR0aDogXCIyMFwiLCBoZWlnaHQ6IFwiMjBcIiwgdmlld0JveDogXCIwIDAgMjQgMjRcIiwgc3R5bGU6IHsgdmVydGljYWxBbGlnbjogJ3RleHQtdG9wJyB9IH0sXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHsgZmlsbDogXCJjdXJyZW50Q29sb3JcIiwgZDogXCJNNi45OTkzOCAxMi45OTh2LTJIMjAuOTk5NHYySDYuOTk5Mzh6bTAgNi4wMDAxdi0ySDIwLjk5OTR2Mkg2Ljk5OTM4em0wLTEyLjAwMDAxdi0ySDIwLjk5OTR2Mkg2Ljk5OTM4em0tNCAxdi0zaC0xdi0xaDJ2NGgtMXptLTEgOS4wMDAwMXYtMWgzdjRoLTN2LTFoMnYtLjVoLTF2LTFoMXYtLjVoLTJ6TTQuMjUgMTBjLjQxNDIxIDAgLjc1LjMzNTguNzUuNzUgMCAuMjAyNC0uMDgwMTcuMzg2MS0uMjEwNS41MjFMMy4xMTk4MyAxM0g1djFIMnYtLjkyMThMNCAxMUgydi0xaDIuMjV6XCIgfSkpKTtcbn1cblxuZnVuY3Rpb24gVW5vcmRlcmVkTGlzdEljb24oKSB7XG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIHsgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgd2lkdGg6IFwiMjBcIiwgaGVpZ2h0OiBcIjIwXCIsIHZpZXdCb3g6IFwiMCAwIDI0IDI0XCIsIHN0eWxlOiB7IHZlcnRpY2FsQWxpZ246ICd0ZXh0LXRvcCcgfSB9LFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7IGZpbGw6IFwiY3VycmVudENvbG9yXCIsIGQ6IFwiTTcgNWgxNHYySDdWNXptMCA4di0yaDE0djJIN3pNNCA0LjUwMDAxYy44MyAwIDEuNS42Njk5MiAxLjUgMS41IDAgLjgzMDA3LS42NyAxLjUtMS41IDEuNXMtMS41LS42Njk5My0xLjUtMS41YzAtLjgzMDA4LjY3LTEuNSAxLjUtMS41ek00IDEwLjVjLjgzIDAgMS41LjY3IDEuNSAxLjVzLS42NyAxLjUtMS41IDEuNS0xLjUtLjY3LTEuNS0xLjUuNjctMS41IDEuNS0xLjV6TTcgMTl2LTJoMTR2Mkg3em0tMy0yLjVjLjgzIDAgMS41LjY3IDEuNSAxLjVzLS42NyAxLjUtMS41IDEuNS0xLjUtLjY3LTEuNS0xLjUuNjctMS41IDEuNS0xLjV6XCIgfSkpKTtcbn1cblxudmFyIEJ0bkJvbGQgPSBjcmVhdGVCdXR0b24oJ0JvbGQnLCAn8J2QgScsICdib2xkJyk7XG52YXIgQnRuQnVsbGV0TGlzdCA9IGNyZWF0ZUJ1dHRvbignQnVsbGV0IGxpc3QnLCBSZWFjdC5jcmVhdGVFbGVtZW50KFVub3JkZXJlZExpc3RJY29uLCBudWxsKSwgJ2luc2VydFVub3JkZXJlZExpc3QnKTtcbnZhciBCdG5DbGVhckZvcm1hdHRpbmcgPSBjcmVhdGVCdXR0b24oJ0NsZWFyIGZvcm1hdHRpbmcnLCAnVMyy4oKTJywgJ3JlbW92ZUZvcm1hdCcpO1xudmFyIEJ0bkl0YWxpYyA9IGNyZWF0ZUJ1dHRvbignSXRhbGljJywgJ/CdkbAnLCAnaXRhbGljJyk7XG52YXIgQnRuU3RyaWtlVGhyb3VnaCA9IGNyZWF0ZUJ1dHRvbignU3RyaWtlIHRocm91Z2gnLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwic1wiLCBudWxsLCBcImFiXCIpLCAnc3RyaWtlVGhyb3VnaCcpO1xudmFyIEJ0bkxpbmsgPSBjcmVhdGVCdXR0b24oJ0xpbmsnLCAn8J+UlycsIGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciAkc2VsZWN0aW9uID0gX2EuJHNlbGVjdGlvbjtcbiAgICBpZiAoKCRzZWxlY3Rpb24gPT09IG51bGwgfHwgJHNlbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogJHNlbGVjdGlvbi5ub2RlTmFtZSkgPT09ICdBJykge1xuICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgndW5saW5rJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYWxlcnRcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NyZWF0ZUxpbmsnLCBmYWxzZSwgcHJvbXB0KCdVUkwnLCAnJykgfHwgdW5kZWZpbmVkKTtcbiAgICB9XG59KTtcbnZhciBCdG5OdW1iZXJlZExpc3QgPSBjcmVhdGVCdXR0b24oJ051bWJlcmVkIGxpc3QnLCBSZWFjdC5jcmVhdGVFbGVtZW50KE9yZGVyZWRMaXN0SWNvbiwgbnVsbCksICdpbnNlcnRPcmRlcmVkTGlzdCcpO1xudmFyIEJ0blJlZG8gPSBjcmVhdGVCdXR0b24oJ1JlZG8nLCAn4oa3JywgJ3JlZG8nKTtcbnZhciBCdG5VbmRlcmxpbmUgPSBjcmVhdGVCdXR0b24oJ1VuZGVybGluZScsIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgc3R5bGU6IHsgdGV4dERlY29yYXRpb246ICd1bmRlcmxpbmUnIH0gfSwgXCJcXHVEODM1XFx1REMxNFwiKSwgJ3VuZGVybGluZScpO1xudmFyIEJ0blVuZG8gPSBjcmVhdGVCdXR0b24oJ1VuZG8nLCAn4oa2JywgJ3VuZG8nKTtcbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbih0aXRsZSwgY29udGVudCwgY29tbWFuZCkge1xuICAgIEJ1dHRvbkZhY3RvcnkuZGlzcGxheU5hbWUgPSB0aXRsZS5yZXBsYWNlKC9cXHMvZywgJycpO1xuICAgIHJldHVybiBCdXR0b25GYWN0b3J5O1xuICAgIGZ1bmN0aW9uIEJ1dHRvbkZhY3RvcnkocHJvcHMpIHtcbiAgICAgICAgdmFyIGVkaXRvclN0YXRlID0gdXNlRWRpdG9yU3RhdGUoKTtcbiAgICAgICAgdmFyICRlbCA9IGVkaXRvclN0YXRlLiRlbCwgJHNlbGVjdGlvbiA9IGVkaXRvclN0YXRlLiRzZWxlY3Rpb247XG4gICAgICAgIHZhciBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiBjb21tYW5kID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYWN0aXZlID0gISEkc2VsZWN0aW9uICYmIGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKGNvbW1hbmQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uQWN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSAkZWwpIHtcbiAgICAgICAgICAgICAgICAkZWwgPT09IG51bGwgfHwgJGVsID09PSB2b2lkIDAgPyB2b2lkIDAgOiAkZWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29tbWFuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbW1hbmQoZWRpdG9yU3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoY29tbWFuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVkaXRvclN0YXRlLmh0bWxNb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IFwicnN3LWJ0blwiLCBcImRhdGEtYWN0aXZlXCI6IGFjdGl2ZSwgb25Nb3VzZURvd246IG9uQWN0aW9uLCB0YWJJbmRleDogLTEsIHRpdGxlOiB0aXRsZSwgdHlwZTogXCJidXR0b25cIiB9LCBwcm9wcyksIGNvbnRlbnQpKTtcbiAgICB9XG59XG5cbnZhciBCdG5TdHlsZXMgPSBjcmVhdGVEcm9wZG93bignU3R5bGVzJywgW1xuICAgIFsnTm9ybWFsJywgJ2Zvcm1hdEJsb2NrJywgJ0RJViddLFxuICAgIFsn8J2Xm/Cdl7LwnZeu8J2XsfCdl7LwnZe/IPCdn60nLCAnZm9ybWF0QmxvY2snLCAnSDEnXSxcbiAgICBbJ0hlYWRlciAyJywgJ2Zvcm1hdEJsb2NrJywgJ0gyJ10sXG4gICAgWyfwnZmy8J2amPCdmo3wnZqOJywgJ2Zvcm1hdEJsb2NrJywgJ1BSRSddLFxuXSk7XG5mdW5jdGlvbiBjcmVhdGVEcm9wZG93bih0aXRsZSwgaXRlbXMpIHtcbiAgICBEcm9wZG93bkZhY3RvcnkuZGlzcGxheU5hbWUgPSB0aXRsZTtcbiAgICByZXR1cm4gRHJvcGRvd25GYWN0b3J5O1xuICAgIGZ1bmN0aW9uIERyb3Bkb3duRmFjdG9yeShwcm9wcykge1xuICAgICAgICB2YXIgZWRpdG9yU3RhdGUgPSB1c2VFZGl0b3JTdGF0ZSgpO1xuICAgICAgICB2YXIgJGVsID0gZWRpdG9yU3RhdGUuJGVsLCAkc2VsZWN0aW9uID0gZWRpdG9yU3RhdGUuJHNlbGVjdGlvbiwgaHRtbE1vZGUgPSBlZGl0b3JTdGF0ZS5odG1sTW9kZTtcbiAgICAgICAgaWYgKGh0bWxNb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWN0aXZlSW5kZXggPSBpdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW1bMV0gPT09ICdmb3JtYXRCbG9jaycgJiYgKCRzZWxlY3Rpb24gPT09IG51bGwgfHwgJHNlbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogJHNlbGVjdGlvbi5ub2RlTmFtZSkgPT09IGl0ZW1bMl07IH0pO1xuICAgICAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRHJvcGRvd24sIF9fYXNzaWduKHt9LCBwcm9wcywgeyBpdGVtczogaXRlbXMsIG9uQ2hhbmdlOiBvbkNoYW5nZSwgc2VsZWN0ZWQ6IGFjdGl2ZUluZGV4LCB0YWJJbmRleDogLTEsIHRpdGxlOiB0aXRsZSB9KSkpO1xuICAgICAgICBmdW5jdGlvbiBvbkNoYW5nZShlKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRWYWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gcGFyc2VJbnQoc2VsZWN0ZWRWYWx1ZSwgMTApO1xuICAgICAgICAgICAgdmFyIF9hID0gaXRlbXNbc2VsZWN0ZWRJbmRleF0gfHwgW10sIGNvbW1hbmQgPSBfYVsxXSwgY29tbWFuZEFyZ3VtZW50ID0gX2FbMl07XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gJGVsKSB7XG4gICAgICAgICAgICAgICAgJGVsID09PSBudWxsIHx8ICRlbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogJGVsLmZvY3VzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbW1hbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb21tYW5kKGVkaXRvclN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZChjb21tYW5kLCBmYWxzZSwgY29tbWFuZEFyZ3VtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gKHRhcmdldC52YWx1ZSA9IHNlbGVjdGVkVmFsdWUpOyB9LCAxMCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBEcm9wZG93bihfYSkge1xuICAgIHZhciBpdGVtcyA9IF9hLml0ZW1zLCBzZWxlY3RlZCA9IF9hLnNlbGVjdGVkLCBpbnB1dFByb3BzID0gX19yZXN0KF9hLCBbXCJpdGVtc1wiLCBcInNlbGVjdGVkXCJdKTtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiwgX19hc3NpZ24oe30sIGlucHV0UHJvcHMsIHsgdmFsdWU6IHNlbGVjdGVkLCBjbGFzc05hbWU6IFwicnN3LWRkXCIgfSksXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiwgeyBoaWRkZW46IHRydWUgfSwgaW5wdXRQcm9wcy50aXRsZSksXG4gICAgICAgIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIsIHsga2V5OiBpdGVtWzJdLCB2YWx1ZTogaW5kZXggfSwgaXRlbVswXSkpOyB9KSkpO1xufVxuXG5mdW5jdGlvbiBIdG1sQnV0dG9uKF9hKSB7XG4gICAgdmFyIHJlc3QgPSBfX3Jlc3QoX2EsIFtdKTtcbiAgICB2YXIgZWRpdG9yU3RhdGUgPSB1c2VFZGl0b3JTdGF0ZSgpO1xuICAgIGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICAgIGVkaXRvclN0YXRlLnVwZGF0ZSh7XG4gICAgICAgICAgICBodG1sTW9kZTogIWVkaXRvclN0YXRlLmh0bWxNb2RlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIF9fYXNzaWduKHsgY2xhc3NOYW1lOiBcInJzdy1idG5cIiwgXCJkYXRhLWFjdGl2ZVwiOiBlZGl0b3JTdGF0ZS5odG1sTW9kZSwgb25DbGljazogb25DbGljaywgdGFiSW5kZXg6IC0xLCB0aXRsZTogXCJIVE1MIG1vZGVcIiwgdHlwZTogXCJidXR0b25cIiB9LCByZXN0KSwgXCI8Lz5cIikpO1xufVxuXG5mdW5jdGlvbiBTZXBhcmF0b3IoKSB7XG4gICAgdmFyIGVkaXRvclN0YXRlID0gdXNlRWRpdG9yU3RhdGUoKTtcbiAgICBpZiAoZWRpdG9yU3RhdGUuaHRtbE1vZGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcInJzdy1zZXBhcmF0b3JcIiB9KTtcbn1cblxuZnVuY3Rpb24gVG9vbGJhcihwcm9wcykge1xuICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fYXNzaWduKHt9LCBwcm9wcywgeyBjbGFzc05hbWU6IFwicnN3LXRvb2xiYXJcIiB9KSk7XG59XG5cbmZ1bmN0aW9uIERlZmF1bHRFZGl0b3IocHJvcHMpIHtcbiAgICByZXR1cm4gKFJlYWN0LmNyZWF0ZUVsZW1lbnQoRWRpdG9yUHJvdmlkZXIsIG51bGwsXG4gICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoRWRpdG9yLCBfX2Fzc2lnbih7fSwgcHJvcHMpLFxuICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChUb29sYmFyLCBudWxsLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuVW5kbywgbnVsbCksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5SZWRvLCBudWxsKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFNlcGFyYXRvciwgbnVsbCksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5Cb2xkLCBudWxsKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkl0YWxpYywgbnVsbCksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChCdG5VbmRlcmxpbmUsIG51bGwpLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuU3RyaWtlVGhyb3VnaCwgbnVsbCksXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChTZXBhcmF0b3IsIG51bGwpLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuTnVtYmVyZWRMaXN0LCBudWxsKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkJ1bGxldExpc3QsIG51bGwpLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VwYXJhdG9yLCBudWxsKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0bkxpbmssIG51bGwpLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoQnRuQ2xlYXJGb3JtYXR0aW5nLCBudWxsKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEh0bWxCdXR0b24sIG51bGwpLFxuICAgICAgICAgICAgICAgIFJlYWN0LmNyZWF0ZUVsZW1lbnQoU2VwYXJhdG9yLCBudWxsKSxcbiAgICAgICAgICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KEJ0blN0eWxlcywgbnVsbCkpKSkpO1xufVxuXG5leHBvcnQgeyBCdG5Cb2xkLCBCdG5CdWxsZXRMaXN0LCBCdG5DbGVhckZvcm1hdHRpbmcsIEJ0bkl0YWxpYywgQnRuTGluaywgQnRuTnVtYmVyZWRMaXN0LCBCdG5SZWRvLCBCdG5TdHJpa2VUaHJvdWdoLCBCdG5TdHlsZXMsIEJ0blVuZGVybGluZSwgQnRuVW5kbywgQ29udGVudEVkaXRhYmxlLCBEZWZhdWx0RWRpdG9yLCBEcm9wZG93biwgRWRpdG9yLCBFZGl0b3JDb250ZXh0LCBFZGl0b3JQcm92aWRlciwgSHRtbEJ1dHRvbiwgSHRtbEVkaXRvciwgU2VwYXJhdG9yLCBUb29sYmFyLCBjcmVhdGVCdXR0b24sIGNyZWF0ZURyb3Bkb3duLCBEZWZhdWx0RWRpdG9yIGFzIGRlZmF1bHQsIHVzZUVkaXRvclN0YXRlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lcy5tanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/react-simple-wysiwyg/lib/index.es.mjs\n");

/***/ })

};
;